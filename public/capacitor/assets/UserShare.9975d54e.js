import{c as y,r as _,o as P,X as M,R as d,S as x,f as s,Y as i,J as L,U as n,a0 as q,a1 as k,F as w,$ as T,a4 as S,a2 as O,a3 as v,a7 as A}from"./index.08e86ffb.js";import{Q as V}from"./QCardSection.3d25e11d.js";import{Q as E}from"./QCard.ec410a0e.js";import{x as j,y as z,Q as F}from"./QCheckbox.b8d0cf70.js";import{Q as W}from"./QTooltip.6758108f.js";import{C as U}from"./ClosePopup.71a35b4b.js";import{c as G}from"./Functions.a6828b9d.js";import{u as X,k as J,x as Y,n as H,a as I}from"./axios.dd0a7574.js";import K from"./UserReports.1bc0db70.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{i18n as $}from"./i18n.a0f971c3.js";function ee(t){const o=document.createElement("textarea");o.value=t,o.contentEditable="true",o.style.position="fixed";const r=()=>{};j(r),document.body.appendChild(o),o.focus(),o.select();const e=document.execCommand("copy");return o.remove(),z(r),e}function ae(t){return navigator.clipboard!==void 0?navigator.clipboard.writeText(t):new Promise((o,r)=>{const e=ee(t);e?o(!0):r(e)})}const te={components:{Reports:K},props:["shareData"],setup(t){var c,l,g,Q,R,N,B;const o=(l=(c=$)==null?void 0:c.global)==null?void 0:l.t,r=X(),{notifyAction:e}=r,C=y(()=>{var a;return!t.shareData||((a=t.shareData)==null?void 0:a.url)}),D=_([]),f=_(!1),h=_(!1),p=_([]),b=y(()=>{var a;return(a=r.configGetter)==null?void 0:a.ipDebug}),m=y(()=>r.authGetter);return P(()=>{const a=document.querySelector("#button");a&&a.addEventListener("click",async()=>{try{await("share"in navigator?navigator:G().Share).share(t.shareData)}catch{f.value=!J}})}),{users_reports:p,contacts:D,reports:h,auth:m,copyLink:C,share:f,xRate:Y,cy:H,addressBook:"contacts"in navigator,currency:((g=t.shareData)==null?void 0:g.currency_code)||"USD",title:((Q=t.shareData)==null?void 0:Q.title)||"",path:(R=t.shareData)!=null&&R.id?"post/"+((N=t.shareData)==null?void 0:N.id):((B=m.value)==null?void 0:B.name)||"",locale:y(()=>{var a;return(a=r.configGetter)==null?void 0:a.locale}),price:y(()=>{var a,u;return((a=t.shareData)==null?void 0:a.price)||((u=t.shareData)==null?void 0:u.credit)}),usersReports(){var a;b.value&&I({url:"api/users/reports",method:"get",data:{users_reports:!0,id:(a=m.value)==null?void 0:a.id}}).then(({data:u})=>{p.value=u,h.value=!0}).catch(u=>e({error:"userReports",e:u}))},async shareT(){try{await("share"in navigator?navigator:G().Share).share(t.shareData)}catch{f.value=!J}},copy(){ae(C.value).then(()=>e({success:o("copy_successful")})).catch(a=>e({error:o("copy_unsuccessful"),e:a}))},async checkProperties(){},async getContacts(){var a;try{f.value=!!((a=D.value)!=null&&a.length)}catch{}}}}},oe={class:"text-h6"},re={class:"text-h6"},se=q("br",null,null,-1);function ce(t,o,r,e,C,D){var h,p,b,m;const f=M("Reports");return d(),x(w,null,[s(F,{modelValue:e.share,"onUpdate:modelValue":o[0]||(o[0]=c=>e.share=c)},{default:i(()=>[s(E,{class:"my-card text-black"},{default:i(()=>{var c;return[s(V,{class:"bg-primary text-white"},{default:i(()=>{var l;return[L(s(n,{dense:"",round:"",color:"primary",class:"float-right",icon:"close"},null,512),[[U]]),q("div",oe,k(((l=r.shareData)==null?void 0:l.banner)||""),1)]}),_:1}),(c=e.contacts)!=null&&c.length?S("",!0):(d(),x(w,{key:0},[s(n,{color:"primary",class:"q-ma-sm q-dark",icon:"fab fa-facebook","data-href":"https://suguffie.com/post/1",target:"_blank","data-layout":"button_count","data-size":"small",type:"a",label:t.$t("share_on_facebook"),href:`https://www.facebook.com/sharer/sharer.php?u=https://suguffie.com/${e.path}`},null,8,["label","href"]),s(n,{color:"primary",class:"q-ma-sm q-dark",icon:"fas fa-link",label:e.copyLink,onClick:T(e.copy,["stop","prevent"])},null,8,["label","onClick"])],64)),(d(!0),x(w,null,O(e.contacts,(l,g)=>(d(),v(V,{key:g},{default:i(()=>[s(n,{type:"a",class:"q-ma-md",icon:"fas fa-envelope",target:"_blank","_:href":"`mailto:${JSON.stringify(contact.email).replaceAll('[','').replaceAll(']','')}?&subject=${title}&body=Checkout ${copyLink}`"}),s(n,{type:"a",class:"q-ma-md",icon:"fas fa-sms","_:href":"`sms://${JSON.stringify(contact.tel).replaceAll('[','').replaceAll(']','')}?body=${copyLink}`"})]),_:2},1024))),128))]}),_:1})]),_:1},8,["modelValue"]),s(F,{modelValue:e.reports,"onUpdate:modelValue":o[1]||(o[1]=c=>e.reports=c)},{default:i(()=>[s(E,{class:"my-card text-black"},{default:i(()=>[s(V,{class:"bg-primary text-white"},{default:i(()=>[L(s(n,{dense:"",round:"",class:"float-right",icon:"close"},null,512),[[U]]),q("div",re,k(t.$t("reports")),1)]),_:1}),s(f,{users_reports:e.users_reports},null,8,["users_reports"])]),_:1})]),_:1},8,["modelValue"]),(e.price>0,d(),v(n,{key:0,class:"q-ma-sm",onClick:T(e.usersReports,["prevent"]),disabled:(h=r.shareData)==null?void 0:h.price,dense:"",color:(p=r.shareData)!=null&&p.price?"":"positive",label:(b=r.shareData)!=null&&b.price?Number(e.price).toLocaleString(e.locale,{style:"currency",currency:e.currency}):e.cy(e.xRate(e.price))},null,8,["onClick","disabled","color","label"])),s(n,{dense:"",flat:"",round:"",icon:"fas fa-share-alt","icon-right":"fas fa-sack-dollar",onClick:e.shareT},null,8,["onClick"]),e.addressBook?(d(),v(n,{key:1,dense:"",flat:"",round:"",icon:"fas fa-address-book",onClick:e.getContacts},null,8,["onClick"])):S("",!0),(m=r.shareData)!=null&&m.tooltip?(d(),v(n,{key:2,dense:"",flat:"",round:"",icon:"fas fa-question"},{default:i(()=>[s(W,{anchor:"top middle",self:"bottom middle",offset:[10,10],class:"text-h6"},{default:i(()=>{var c,l;return[A(k(t.$t("To gain users and earn money, you can share your affiliate link. When new users sign up using this link, you'll earn a percentage of their spending.")),1),se,A(" "+k(((c=r.shareData)==null?void 0:c.tooltip)||"")+" "+k("suguffie.com/"+(((l=e.auth)==null?void 0:l.name)||"")),1)]}),_:1})]),_:1})):S("",!0)],64)}var be=Z(te,[["render",ce]]);export{be as S};
