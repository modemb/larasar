import{Q as F}from"./QCard.ec410a0e.js";import{Q as I,f as P,g as h,h as w}from"./QCheckbox.b8d0cf70.js";import{Q as U}from"./QImg.786665cf.js";import{r as u,c as y,o as D,X as x,R as b,S,f as t,Y as a,a0 as d,bd as q,F as A,a3 as Q,Q as k,a1 as C,U as V,$ as B}from"./index.08e86ffb.js";import{b as G,Q as z}from"./QTable.7b2293dc.js";import{Q as L}from"./ClosePopup.71a35b4b.js";import{u as R,b as Y,a as M}from"./axios.dd0a7574.js";import{P as N}from"./UserPost.9b6312ed.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import{i18n as E}from"./i18n.a0f971c3.js";import"./use-dark.09fea322.js";import"./QSeparator.e65deedb.js";import"./QCardSection.3d25e11d.js";import"./QSpace.2b47e780.js";import"./PostLocation.18462df1.js";import"./QLayout.f367b0a4.js";import"./TouchPan.81640d8c.js";import"./export-file.200e4ebe.js";import"./QForm.b5701193.js";import"./Functions.a6828b9d.js";import"./GoogleAutocomplete.1506f244.js";import"./QToggle.c5ba4237.js";import"./UserFiles.b62f67b7.js";import"./QPage.04ecbe7a.js";import"./QPageContainer.58a868ff.js";import"./use-quasar.41efb91a.js";import"./QEditor.2dc398a7.js";import"./QBtnDropdown.92e4f5d8.js";import"./QTooltip.6758108f.js";import"./UserCheckout.70f50a93.js";import"./UserReports.1bc0db70.js";import"./QPopupProxy.40be37ab.js";import"./QTr.5fbb2c40.js";import"./UserShare.9975d54e.js";import"./Auth.1fdd8b5e.js";const W={components:{Post:N},setup(){var n,c;const r=(c=(n=E)==null?void 0:n.global)==null?void 0:c.t,l=R(),{crudAction:g,notifyAction:o}=l,f=u({}),_=u(!1),p=y(()=>l.authGetter),v=y(()=>l.favoritesGetter||[]);D(()=>e({}));function e(i){var s;g({...i,url:`api/categories/${(s=p.value)==null?void 0:s.id}`,method:"get",favorite:!0,mutate:"favoritesGetter"}).catch(m=>o({error:"favoritesAction",e:m}))}return{postData:f,view:_,baseURL:Y,height:u(screen.height/1.4),viewPost(i){f.value={...i,fav:1},_.value=!0},remove(i){var s;confirm("Are You Sure You Want To Remove Post From Favorite "+i.id)===!0&&M({method:"delete",url:`api/categories/${i.favorite_id}`,data:{auth_id:(s=p.value)==null?void 0:s.id,favorite:!0}}).then(()=>{l["wishGetter"+i.id]=0,e({refresh:["favoritesGetter"]})}).catch(m=>o({error:"removeFavorite",e:m}))},columns:[{name:"pic",align:"center",label:r("picture"),field:"pic",sortable:!0},{name:"post_title",align:"center",label:r("post_title"),field:"name",sortable:!0},{name:"address",align:"center",label:r("address"),field:"address",sortable:!0},{name:"city",align:"center",label:r("city"),field:"city",sortable:!0},{name:"end_date",align:"center",label:r("expiry"),field:"end_date",sortable:!0},{name:"edit",align:"center",label:r("edit"),field:"edit",sortable:!1},{name:"remove",align:"center",label:r("remove"),field:"remove",sortable:!1}],rows:v,filter:u("")}}},X={class:"*q-pa-md"},$={class:"q-pa-md q-gutter-md"},j={class:"text-weight-medium"},H={class:"text-grey-8"},J={class:"timestamp"},K={class:"text-grey-8 q-gutter-xs"};function O(r,l,g,o,f,_){const p=x("Post"),v=x("timeago");return b(),S(A,null,[t(I,{modelValue:o.view,"onUpdate:modelValue":l[0]||(l[0]=e=>o.view=e)},{default:a(()=>[t(F,{class:"my-card col-12",style:{width:"1250px"}},{default:a(()=>[t(p,{postData:o.postData},null,8,["postData"])]),_:1})]),_:1},8,["modelValue"]),d("div",X,[t(G,{"hide-header":"",style:q("height:"+o.height+"px"),ref:"table",title:r.$t("favorites"),rows:o.rows,columns:o.columns,"row-key":"name","virtual-scroll":"","virtual-scroll-item-size":48,"rows-per-page-options":[0],filter:o.filter,"binary-state-sort":""},{body:a(e=>[d("div",$,[t(z,{bordered:"",class:"rounded-borders",style:{"max-width":"1600px"}},{default:a(()=>[t(P,null,{default:a(()=>[t(h,{style:{"max-width":"150px","max-height":"150px",cursor:"pointer"},onClick:n=>o.viewPost(e.row)},{default:a(()=>{var n,c,i,s,m;return[(c=(n=e.row)==null?void 0:n.pics)!=null&&c[0]?(b(),Q(U,{key:0,src:o.baseURL+"/"+((m=(s=(i=e.row)==null?void 0:i.pics)==null?void 0:s[0])==null?void 0:m.pic)},null,8,["src"])):(b(),Q(k,{key:1,name:"fas fa-plus-circle",color:"black",size:"150px"}))]}),_:2},1032,["onClick"]),t(h,null,{default:a(()=>[t(w,{lines:"1"},{default:a(()=>[d("span",j,C(e.row.city),1),d("span",H,C(e.row.postal_code),1)]),_:2},1024),t(w,{lines:"1",class:"q-mt-xs text-body2 text-weight-bold text-primary text-uppercase"},{default:a(()=>[t(V,{flat:"",dense:"",label:e.row.post_title,to:"/post/"+e.row.id},null,8,["label","to"])]),_:2},1024),d("small",J,[t(v,{datetime:e.row.created_at,"auto-update":60},null,8,["datetime"])])]),_:2},1024),t(h,{side:""},{default:a(()=>[d("div",K,[t(V,{class:"*gt-xs",size:"12px",flat:"",dense:"",label:r.$t("remove"),icon:"delete",onClick:B(n=>o.remove(e.row),["prevent"])},null,8,["label","onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),"top-right":a(()=>[t(L,{clearable:"",borderless:"",dense:"",debounce:"300",modelValue:o.filter,"onUpdate:modelValue":l[1]||(l[1]=e=>o.filter=e),placeholder:r.$t("search")},{append:a(()=>[t(k,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["style","title","rows","columns","filter"])])],64)}var Ae=T(W,[["render",O],["__scopeId","data-v-349dc85a"]]);export{Ae as default};
