import{r as d,c as M,o as j,w as R,X as J,R as c,S as z,f as r,Y as i,bd as O,J as W,U as u,a0 as E,a1 as A,a3 as k,a4 as C,$ as S,a7 as L,F as Y,Q as X}from"./index.08e86ffb.js";import{Q as H}from"./QCardSection.3d25e11d.js";import{Q as K}from"./QToggle.c5ba4237.js";import{Q as _,C as Z}from"./ClosePopup.71a35b4b.js";import{Q as x}from"./QEditor.2dc398a7.js";import{Q as $}from"./QCard.ec410a0e.js";import{Q as ee}from"./QCheckbox.b8d0cf70.js";import{Q as le,a as v}from"./QTr.5fbb2c40.js";import{b as oe,c as ae}from"./QTable.7b2293dc.js";import{u as te}from"./use-quasar.41efb91a.js";import{u as re,b as ie,m as ne,a as se}from"./axios.dd0a7574.js";import{L as de}from"./LocaleDropdown.7d1de440.js";import{_ as ce}from"./plugin-vue_export-helper.21dcd24c.js";import{i18n as ue}from"./i18n.a0f971c3.js";import"./use-dark.09fea322.js";import"./QBtnDropdown.92e4f5d8.js";import"./QTooltip.6758108f.js";import"./QSeparator.e65deedb.js";const me={components:{LocaleDropdown:de},setup(){var F,I;const a=(I=(F=ue)==null?void 0:F.global)==null?void 0:I.t,t=te(),Q=re(),{crudAction:e,notifyAction:g}=Q,m=d(!1),D=d(!1),o=d(!1),f=d(!1),s=d(""),P=d(""),w=d({}),V=d(""),h=d(""),q=d(""),y=d(1),p=M(()=>{var l;return(l=Q.configGetter)==null?void 0:l.locale}),T=M(()=>Q[y.value+"Getter"]||[]);j(()=>U({e:"onMountedPages"}));function B(l){R(T,n=>n.forEach(b=>{var G;if((b==null?void 0:b.slug)===((G=w.value)==null?void 0:G.slug)&&(b==null?void 0:b.locale)!==w.value.locale)return B(w.value=b)})),o.value=D.value=!0,m.value=!1,p.value=l==null?void 0:l.locale,P.value=l==null?void 0:l.icon,V.value=l==null?void 0:l.page_title,s.value=l==null?void 0:l.slug,h.value=l==null?void 0:l.description,q.value=l==null?void 0:l.content}function U(l){e({url:"api/pages/pages",method:"get",pages:y.value,locale:p.value,mutate:y.value+"Getter"}).catch(n=>g({error:l.e,e:n}))}R([p,y],()=>U({e:"localePage"}));function N(l){confirm("Are You Sure You Want To Delete Page "+l.page_title)===!0&&e({success:l.forever?"Page Deleted Forever":"Page Deleted Successfully",url:`api/pages/${l==null?void 0:l.id}`,method:"delete",locale:p.value,slug:l.slug,pages:l.forever?0:1,forever:l.forever,refresh:["reloadApp"]}).catch(n=>g({error:"deletePage",e:n}))}return{desktop:t.platform.is.desktop,height:screen.height/1.4,pagesData:y,icon:P,Page:w,page_title:V,slug:s,description:h,content:q,dense:d(!1),filter:d(""),loader:m,addPage:D,editPage:o,loading:f,baseURL:ie,add(){e({success:"Page Created Successfully",url:"api/pages",method:"post",locale:p.value,icon:P.value,page_title:V.value,description:h.value,content:q.value,pages:1,refresh:["reloadApp"]}).catch(l=>g({error:"addPage",e:l})),y.value=1,P.value=V.value=h.value=q.value=""},edit:B,update(l){m.value=!0,e({success:"Page Updated Successfully",url:`api/pages/${l.id}`,method:"put",locale:p.value,page_title:V.value,slug:s.value,pages:1,updateSlug:l.slug!==s.value,description:h.value,icon:P.value,content:q.value,refresh:["reloadApp"]}).then(()=>m.value=!1).catch(n=>g({error:"updatePage",e:n}))},async active(l){ne(["reloadApp"]),m.value=!0;const{data:n}=await se.put(`api/pages/${l==null?void 0:l.slug}`,{success:l!=null&&l.active?"Page Deactivated Successfully":"Page Activated Successfully",active:1,activePages:l==null?void 0:l.active});w.value=n==null?void 0:n.page,n.success&&(m.value=!1,g({success:n.success}),U({e:"mountedPages"}))},restore(l){m.value=!0,e({success:"Page Restored Successfully",url:"api/pages",method:"POST",slug:l.slug,refresh:["reloadApp"],restore:!0}).then(()=>m.value=!1).catch(n=>g({error:"restorePage",e:n}))},Delete:N,delete_forever(l){N({...l,forever:!0,slug:""})},pagination:{sortBy:"asc",descending:!1,page:1,rowsPerPage:0,rowsNumber:10},columns:[{name:"page_title",align:"center",label:a("page_title"),field:"page_title",sortable:!0},{name:"description",align:"center",label:a("description"),field:"description",sortable:!0},{name:"icon",align:"center",label:a("icon"),field:"icon",sortable:!0},{name:"active",align:"center",label:a("active"),field:"active",sortable:!0},{name:"edit",align:"center",label:a("edit/restore"),field:"edit",sortable:!1},{name:"delete",align:"center",label:a("delete/forever"),field:"delete",sortable:!1}],rows:T}}},fe={class:"q-pa-md q-gutter-sm"},ve={class:"text-h6"},ge={class:"q-pa-sm"};function be(a,t,Q,e,g,m){const D=J("LocaleDropdown");return c(),z("div",fe,[r(ee,{modelValue:e.addPage,"onUpdate:modelValue":t[8]||(t[8]=o=>e.addPage=o)},{default:i(()=>[r($,{class:"my-card col-12"},{default:i(()=>[r(H,{class:"bg-primary text-white"},{default:i(()=>[W(r(u,{dense:"",round:"",class:"float-right",icon:"close"},null,512),[[Z]]),E("div",ve,A(e.editPage?a.$t("update_page"):a.$t("add_page")),1)]),_:1}),E("div",ge,[r(_,{clearable:"",outlined:"",modelValue:e.page_title,"onUpdate:modelValue":t[6]||(t[6]=o=>e.page_title=o),label:a.$t("page_title")},{append:i(()=>{var o,f;return[e.desktop?(c(),k(K,{key:0,modelValue:e.dense,"onUpdate:modelValue":t[0]||(t[0]=s=>e.dense=s)},null,8,["modelValue"])):C("",!0),e.desktop?(c(),k(_,{key:1,clearable:"",outlined:"",modelValue:e.slug,"onUpdate:modelValue":t[1]||(t[1]=s=>e.slug=s),label:a.$t("custom_slug"),disable:!e.dense},null,8,["modelValue","label","disable"])):C("",!0),e.desktop?(c(),k(_,{key:2,clearable:"",outlined:"",modelValue:e.description,"onUpdate:modelValue":t[2]||(t[2]=s=>e.description=s),label:a.$t("description")},null,8,["modelValue","label"])):C("",!0),e.desktop?(c(),k(_,{key:3,clearable:"",outlined:"",modelValue:e.icon,"onUpdate:modelValue":t[3]||(t[3]=s=>e.icon=s),label:a.$t("icon")},null,8,["modelValue","label"])):C("",!0),r(D),e.editPage?(c(),k(u,{key:4,square:"",outlined:"",color:(o=e.Page)!=null&&o.active?"secondary":"red",label:(f=e.Page)!=null&&f.active?"Active":"Draft",onClick:t[4]||(t[4]=S(s=>e.active(e.Page),["prevent"]))},null,8,["color","label"])):C("",!0),e.editPage?(c(),k(u,{key:5,square:"",outlined:"",class:"q-ma-sm",icon:"fas fa-floppy-disk",loading:e.loader,onClick:t[5]||(t[5]=S(s=>e.update(e.Page),["prevent"]))},null,8,["loading"])):(c(),k(u,{key:6,square:"",outlined:"",class:"q-ma-sm",icon:"fas fa-plus-square",loading:e.loader,onClick:S(e.add,["prevent"])},null,8,["loading","onClick"]))]}),_:1},8,["modelValue","label"]),r(x,{modelValue:e.content,"onUpdate:modelValue":t[7]||(t[7]=o=>e.content=o),dense:a.$q.screen.lt.md,toolbar:[[{label:a.$q.lang.editor.align,icon:a.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:a.$q.lang.editor.align,icon:a.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:a.$q.lang.editor.formatting,icon:a.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:a.$q.lang.editor.fontSize,icon:a.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:a.$q.lang.editor.defaultFont,icon:a.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","dense","toolbar"])])]),_:1})]),_:1},8,["modelValue"]),r(oe,{style:O("height:"+e.height+"px"),ref:"table",title:a.$t("pages_list"),rows:e.rows,columns:e.columns,"row-key":"name","virtual-scroll":"","virtual-scroll-item-size":48,"rows-per-page-options":[0],loading:e.loading,filter:e.filter,"binary-state-sort":""},{body:i(o=>[r(le,{props:o},{default:i(()=>[r(v,{key:"page_title",props:o},{default:i(()=>[r(u,{color:"primary",flat:"",label:o.row.page_title,to:"/page/"+o.row.slug},null,8,["label","to"])]),_:2},1032,["props"]),r(v,{key:"description",props:o},{default:i(()=>[L(A(o.row.description),1)]),_:2},1032,["props"]),r(v,{key:"icon",props:o},{default:i(()=>[L(A(o.row.icon),1)]),_:2},1032,["props"]),r(v,{key:"active",props:o},{default:i(()=>[L(A(o.row.active?"Active":"Draft"),1)]),_:2},1032,["props"]),e.pagesData?(c(),z(Y,{key:0},[r(v,{key:"edit",props:o},{default:i(()=>[r(u,{icon:"edit",rounded:"",class:"q-ma-md",onClick:f=>e.edit(e.Page=o.row)},null,8,["onClick"])]),_:2},1032,["props"]),r(v,{key:"delete",props:o},{default:i(()=>[r(u,{icon:"delete",rounded:"",class:"*q-mb-md",onClick:S(f=>e.Delete(o.row),["prevent"])},null,8,["onClick"])]),_:2},1032,["props"])],64)):(c(),z(Y,{key:1},[r(v,{key:"edit",props:o},{default:i(()=>[r(u,{icon:"restore",rounded:"",class:"q-ma-md",onClick:f=>e.restore(o.row)},null,8,["onClick"])]),_:2},1032,["props"]),r(v,{key:"delete",props:o},{default:i(()=>[r(u,{icon:"delete_forever",rounded:"",class:"*q-mb-md",onClick:S(f=>e.delete_forever(o.row),["prevent"])},null,8,["onClick"])]),_:2},1032,["props"])],64))]),_:2},1032,["props"])]),"top-right":i(()=>[r(ae,{modelValue:e.pagesData,"onUpdate:modelValue":t[9]||(t[9]=o=>e.pagesData=o),push:"",glossy:"",class:"q-ma-xs col-md-3","toggle-color":"primary",options:[{label:a.$t("pages"),value:1},{label:a.$t("Trash"),value:0}]},null,8,["modelValue","options"]),r(u,{icon:"add_circle_outline",rounded:"",class:"q-ma-md",label:a.$t("add_page"),onClick:t[10]||(t[10]=o=>(e.addPage=!0,e.editPage=!1,e.page_title=e.icon=e.description=e.content=""))},null,8,["label"]),r(_,{clearable:"",borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[11]||(t[11]=o=>e.filter=o),placeholder:a.$t("search")},{append:i(()=>[r(X,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["style","title","rows","columns","loading","filter"])])}var Be=ce(me,[["render",be]]);export{Be as default};
