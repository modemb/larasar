import{u as ie,a as ne}from"./use-dark.09fea322.js";import{b as E,c as ue}from"./QLayout.f367b0a4.js";import{T as x}from"./TouchPan.81640d8c.js";import{y as U,r as s,c as u,aE as se,w as _,ag as ce,aG as ve,B as W,h as v,aM as X,J as I,g as Y,b0 as N,b1 as Q,i as fe,I as R,aW as he,K as de}from"./index.08e86ffb.js";import{b as V}from"./ClosePopup.71a35b4b.js";const K=["vertical","horizontal"],D={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},G={prevent:!0,mouse:!0,mouseAllDir:!0},J=l=>l>=250?50:Math.ceil(l/5);var ye=U({name:"QScrollArea",props:{...ie,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(l,{slots:B,emit:p}){const b=s(!1),r=s(!1),h=s(!1),i={vertical:s(0),horizontal:s(0)},e={vertical:{ref:s(null),position:s(0),size:s(0)},horizontal:{ref:s(null),position:s(0),size:s(0)}},{proxy:f}=Y(),w=ne(l,f.$q);let S=null,q;const m=s(null),j=u(()=>"q-scrollarea"+(w.value===!0?" q-scrollarea--dark":""));e.vertical.percentage=u(()=>{const t=e.vertical.size.value-i.vertical.value;if(t<=0)return 0;const a=V(e.vertical.position.value/t,0,1);return Math.round(a*1e4)/1e4}),e.vertical.thumbHidden=u(()=>(l.visible===null?h.value:l.visible)!==!0&&b.value===!1&&r.value===!1||e.vertical.size.value<=i.vertical.value+1),e.vertical.thumbStart=u(()=>e.vertical.percentage.value*(i.vertical.value-e.vertical.thumbSize.value)),e.vertical.thumbSize=u(()=>Math.round(V(i.vertical.value*i.vertical.value/e.vertical.size.value,J(i.vertical.value),i.vertical.value))),e.vertical.style=u(()=>({...l.thumbStyle,...l.verticalThumbStyle,top:`${e.vertical.thumbStart.value}px`,height:`${e.vertical.thumbSize.value}px`})),e.vertical.thumbClass=u(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.vertical.barClass=u(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),e.horizontal.percentage=u(()=>{const t=e.horizontal.size.value-i.horizontal.value;if(t<=0)return 0;const a=V(Math.abs(e.horizontal.position.value)/t,0,1);return Math.round(a*1e4)/1e4}),e.horizontal.thumbHidden=u(()=>(l.visible===null?h.value:l.visible)!==!0&&b.value===!1&&r.value===!1||e.horizontal.size.value<=i.horizontal.value+1),e.horizontal.thumbStart=u(()=>e.horizontal.percentage.value*(i.horizontal.value-e.horizontal.thumbSize.value)),e.horizontal.thumbSize=u(()=>Math.round(V(i.horizontal.value*i.horizontal.value/e.horizontal.size.value,J(i.horizontal.value),i.horizontal.value))),e.horizontal.style=u(()=>({...l.thumbStyle,...l.horizontalThumbStyle,[f.$q.lang.rtl===!0?"right":"left"]:`${e.horizontal.thumbStart.value}px`,width:`${e.horizontal.thumbSize.value}px`})),e.horizontal.thumbClass=u(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.horizontal.barClass=u(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const F=u(()=>e.vertical.thumbHidden.value===!0&&e.horizontal.thumbHidden.value===!0?l.contentStyle:l.contentActiveStyle),d=[[x,t=>{C(t,"vertical")},void 0,{vertical:!0,...G}]],z=[[x,t=>{C(t,"horizontal")},void 0,{horizontal:!0,...G}]];function H(){const t={};return K.forEach(a=>{const n=e[a];t[a+"Position"]=n.position.value,t[a+"Percentage"]=n.percentage.value,t[a+"Size"]=n.size.value,t[a+"ContainerSize"]=i[a].value}),t}const P=se(()=>{const t=H();t.ref=f,p("scroll",t)},0);function M(t,a,n){if(K.includes(t)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(t==="vertical"?N:Q)(m.value,a,n)}function T({height:t,width:a}){let n=!1;i.vertical.value!==t&&(i.vertical.value=t,n=!0),i.horizontal.value!==a&&(i.horizontal.value=a,n=!0),n===!0&&O()}function o({position:t}){let a=!1;e.vertical.position.value!==t.top&&(e.vertical.position.value=t.top,a=!0),e.horizontal.position.value!==t.left&&(e.horizontal.position.value=t.left,a=!0),a===!0&&O()}function c({height:t,width:a}){e.horizontal.size.value!==a&&(e.horizontal.size.value=a,O()),e.vertical.size.value!==t&&(e.vertical.size.value=t,O())}function C(t,a){const n=e[a];if(t.isFirst===!0){if(n.thumbHidden.value===!0)return;q=n.position.value,r.value=!0}else if(r.value!==!0)return;t.isFinal===!0&&(r.value=!1);const y=D[a],A=i[a].value,ae=(n.size.value-A)/(A-n.thumbSize.value),oe=t.distance[y.dist],re=q+(t.direction===y.dir?1:-1)*oe*ae;k(re,a)}function L(t,a){const n=e[a];if(n.thumbHidden.value!==!0){const y=t[D[a].offset];if(y<n.thumbStart.value||y>n.thumbStart.value+n.thumbSize.value){const A=y-n.thumbSize.value/2;k(A/i[a].value*n.size.value,a)}n.ref.value!==null&&n.ref.value.dispatchEvent(new MouseEvent(t.type,t))}}function Z(t){L(t,"vertical")}function ee(t){L(t,"horizontal")}function O(){b.value=!0,S!==null&&clearTimeout(S),S=setTimeout(()=>{S=null,b.value=!1},l.delay),l.onScroll!==void 0&&P()}function k(t,a){m.value[D[a].scroll]=t}let g=null;function te(){g!==null&&clearTimeout(g),g=setTimeout(()=>{g=null,h.value=!0},f.$q.platform.is.ios?50:0)}function le(){g!==null&&(clearTimeout(g),g=null),h.value=!1}let $=null;return _(()=>f.$q.lang.rtl,t=>{m.value!==null&&Q(m.value,Math.abs(e.horizontal.position.value)*(t===!0?-1:1))}),ce(()=>{$={top:e.vertical.position.value,left:e.horizontal.position.value}}),ve(()=>{if($===null)return;const t=m.value;t!==null&&(Q(t,$.left),N(t,$.top))}),W(P.cancel),Object.assign(f,{getScrollTarget:()=>m.value,getScroll:H,getScrollPosition:()=>({top:e.vertical.position.value,left:e.horizontal.position.value}),getScrollPercentage:()=>({top:e.vertical.percentage.value,left:e.horizontal.percentage.value}),setScrollPosition:M,setScrollPercentage(t,a,n){M(t,a*(e[t].size.value-i[t].value)*(t==="horizontal"&&f.$q.lang.rtl===!0?-1:1),n)}}),()=>v("div",{class:j.value,onMouseenter:te,onMouseleave:le},[v("div",{ref:m,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:l.tabindex!==void 0?l.tabindex:void 0},[v("div",{class:"q-scrollarea__content absolute",style:F.value},X(B.default,[v(E,{debounce:0,onResize:c})])),v(ue,{axis:"both",onScroll:o})]),v(E,{debounce:0,onResize:T}),v("div",{class:e.vertical.barClass.value,style:[l.barStyle,l.verticalBarStyle],"aria-hidden":"true",onMousedown:Z}),v("div",{class:e.horizontal.barClass.value,style:[l.barStyle,l.horizontalBarStyle],"aria-hidden":"true",onMousedown:ee}),I(v("div",{ref:e.vertical.ref,class:e.vertical.thumbClass.value,style:e.vertical.style.value,"aria-hidden":"true"}),d),I(v("div",{ref:e.horizontal.ref,class:e.horizontal.thumbClass.value,style:e.horizontal.style.value,"aria-hidden":"true"}),z)])}}),_e=U({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(l,{slots:B,emit:p}){const{proxy:{$q:b}}=Y(),r=fe(de,R);if(r===R)return console.error("QFooter needs to be child of QLayout"),R;const h=s(parseInt(l.heightHint,10)),i=s(!0),e=s(he.value===!0||r.isContainer.value===!0?0:window.innerHeight),f=u(()=>l.reveal===!0||r.view.value.indexOf("F")!==-1||b.platform.is.ios&&r.isContainer.value===!0),w=u(()=>r.isContainer.value===!0?r.containerHeight.value:e.value),S=u(()=>{if(l.modelValue!==!0)return 0;if(f.value===!0)return i.value===!0?h.value:0;const o=r.scroll.value.position+w.value+h.value-r.height.value;return o>0?o:0}),q=u(()=>l.modelValue!==!0||f.value===!0&&i.value!==!0),m=u(()=>l.modelValue===!0&&q.value===!0&&l.reveal===!0),j=u(()=>"q-footer q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-bottom"+(l.bordered===!0?" q-footer--bordered":"")+(q.value===!0?" q-footer--hidden":"")+(l.modelValue!==!0?" q-layout--prevent-focus"+(f.value!==!0?" hidden":""):"")),F=u(()=>{const o=r.rows.value.bottom,c={};return o[0]==="l"&&r.left.space===!0&&(c[b.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),o[2]==="r"&&r.right.space===!0&&(c[b.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),c});function d(o,c){r.update("footer",o,c)}function z(o,c){o.value!==c&&(o.value=c)}function H({height:o}){z(h,o),d("size",o)}function P(){if(l.reveal!==!0)return;const{direction:o,position:c,inflectionPoint:C}=r.scroll.value;z(i,o==="up"||c-C<100||r.height.value-w.value-c-h.value<300)}function M(o){m.value===!0&&z(i,!0),p("focusin",o)}_(()=>l.modelValue,o=>{d("space",o),z(i,!0),r.animate()}),_(S,o=>{d("offset",o)}),_(()=>l.reveal,o=>{o===!1&&z(i,l.modelValue)}),_(i,o=>{r.animate(),p("reveal",o)}),_([h,r.scroll,r.height],P),_(()=>b.screen.height,o=>{r.isContainer.value!==!0&&z(e,o)});const T={};return r.instances.footer=T,l.modelValue===!0&&d("size",h.value),d("space",l.modelValue),d("offset",S.value),W(()=>{r.instances.footer===T&&(r.instances.footer=void 0,d("size",0),d("offset",0),d("space",!1))}),()=>{const o=X(B.default,[v(E,{debounce:0,onResize:H})]);return l.elevated===!0&&o.push(v("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),v("footer",{class:j.value,style:F.value,onFocusin:M},o)}}});export{ye as Q,_e as a};
