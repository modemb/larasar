import{r as i,c as S,o as I,w as O,R as V,S as q,f as o,Y as d,a0 as p,bd as P,F as B,J as G,U as n,a1 as m,a3 as E,$ as v,a7 as u,Q as M}from"./index.08e86ffb.js";import{Q as R}from"./QCardSection.3d25e11d.js";import{Q as f,C as W}from"./ClosePopup.71a35b4b.js";import{Q as J}from"./QCard.ec410a0e.js";import{Q as X}from"./QCheckbox.b8d0cf70.js";import{Q as j,a as s}from"./QTr.5fbb2c40.js";import{b as H,c as K}from"./QTable.7b2293dc.js";import{u as L,a as y,m as F}from"./axios.dd0a7574.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{i18n as x}from"./i18n.a0f971c3.js";import"./use-dark.09fea322.js";import"./QSeparator.e65deedb.js";const $={setup(){const t=x.global.t,r=L(),{crudAction:h,notifyAction:a}=r,c=i(!1),z=i(!1),e=i("currencies"),g=i({}),w=i("XAU"),D=i(""),A=i("One Troy Ounce Of Gold"),U=i(""),Q=i(0),C=i(0),k=i(0),T=i(C.value*k.value),N=S(()=>r.authGetter);I(()=>_({currenciesData:"currencies"})),O(e,l=>_({currenciesData:l}));function _(l){h({...l,url:"api/users/currencies",method:"get",mutate:e.value}).catch(b=>a({error:"currenciesAction",e:b}))}function Y(l){N.value&&confirm("Are You Sure You Want To "+(l.forever?"Delete Forever":"Delete")+" Currency "+l.to)===!0&&y({url:`/api/users/${l.id}`,method:"delete",data:{currency:!0}}).then(()=>_({currenciesData:e.value})).catch(b=>a({error:"deleteAction",e:b}))}return{height:screen.height/1.4,editCurrency:z,currenciesData:e,Currency:g,loader:c,filter:i(""),from:w,to:D,from_name:A,to_name:U,decimal_digits:Q,rate:C,amount:k,result:T,pagination:{sortBy:"asc",descending:!1,page:1,rowsPerPage:0,rowsNumber:10},add(){h({success:"Currency Added Successfully",url:"api/users",method:"post",from:w.value,to:D.value,from_name:A.value,to_name:U.value,decimal_digits:Q.value,rate:C.value,amount:k.value,result:T.value,refresh:["reloadApp"]}).then(()=>_({currenciesData:e.value})).catch(l=>a({error:"addCurrency",e:l}))},update(l){h({success:"Currency Updated Successfully",url:"api/users/xRate",method:"put",from:w.value||(l==null?void 0:l.from)||"",to:D.value||(l==null?void 0:l.to)||"",decimal_digits:Q.value||(l==null?void 0:l.decimal_digits)||"",rate:Number(C.value||(l==null?void 0:l.rate)||0),amount:k.value||(l==null?void 0:l.amount)||0,result:T.value||(l==null?void 0:l.result)||0,from_name:A.value||(l==null?void 0:l.from_name)||"",to_name:U.value||(l==null?void 0:l.to_name)||"",refresh:["reloadApp"]}).then(()=>_({currenciesData:e.value})).catch(b=>a({error:"updateCurrency",e:b}))},Edit(l){z.value=!0,w.value=(l==null?void 0:l.from)||"",D.value=(l==null?void 0:l.to)||"",Q.value=(l==null?void 0:l.decimal_digits)||0,C.value=(l==null?void 0:l.rate)||0,A.value=(l==null?void 0:l.from_name)||"",U.value=(l==null?void 0:l.to_name)||"",k.value=(l==null?void 0:l.amount)||0,T.value=(l==null?void 0:l.result)||0,g.value=l},Delete:Y,delete_forever(l){Y({...l,forever:!0})},restore(l){y.post("api/users",{currency_id:l.id}).then(()=>{F(["reloadApp"]),_({currenciesData:"cyTrashed"})}).catch(b=>a({error:"restoreCurrency",e:b}))},fromAnalytics(){},truncate(){if(N.value&&confirm("Are You Sure You Want To Truncate currencies")===!0)c.value=!0;else return;y.delete("api/users/truncate?truncate=true").then(()=>{F(["reloadApp"]),_({currenciesData:"currencies"}),c.value=!1}).catch(l=>a({error:"truncate",e:l}))},columns:S(()=>[{name:"id",align:"center",label:t("ID"),field:"id",sortable:!0},{name:"from",align:"center",label:t("from"),field:"from",sortable:!0},{name:"to",align:"center",label:t("to"),field:"to",sortable:!0},{name:"from_to",align:"center",label:t("from_to"),field:"from_to",sortable:!0},{name:"from_name",align:"center",label:t("from_name"),field:"from_name",sortable:!0},{name:"to_name",align:"center",label:t("to_name"),field:"to_name",sortable:!0},{name:"decimal_digits",align:"center",label:t("decimal_digits"),field:"decimal_digits",sortable:!0},{name:"rate",align:"center",label:t("rate"),field:"rate",sortable:!0},{name:"amount",align:"center",label:t("amount"),field:"amount",sortable:!0},{name:"result",align:"center",label:t("result"),field:"result",sortable:!0},{name:"edit",align:"center",label:t("edit/restore"),field:"edit",sortable:!1},{name:"delete",align:"center",label:t("delete/foreve"),field:"delete",sortable:!1}]),rows:S(()=>r[e.value]||[])}}},ee={class:"text-h6"},le={class:"q-pa-sm"},ae={class:"row"},te={class:"q-pa-md"},oe={class:"q-pa-md"};function re(t,r,h,a,c,z){return V(),q(B,null,[o(X,{modelValue:a.editCurrency,"onUpdate:modelValue":r[11]||(r[11]=e=>a.editCurrency=e)},{default:d(()=>[o(J,{class:"my-card text-white",style:{width:"800px"}},{default:d(()=>[o(R,{class:"bg-primary"},{default:d(()=>[G(o(n,{dense:"",round:"",class:"float-right",icon:"close"},null,512),[[W]]),p("div",ee,m(a.Currency?t.$t("Update Currency"):t.$t("Add Currency")),1)]),_:1}),p("div",le,[p("div",ae,[o(f,{filled:"","lazy-rules":"",type:"text",modelValue:a.from,"onUpdate:modelValue":r[0]||(r[0]=e=>a.from=e),maxlength:"3",label:t.$t("from"),class:"col-2","_:error":"from_data ? true : false","_:error-message":"from_data",clearable:"",rules:[e=>e&&e.length>0||t.$t("add_from")]},null,8,["modelValue","label","rules"]),o(f,{filled:"","lazy-rules":"",type:"text",modelValue:a.to,"onUpdate:modelValue":r[1]||(r[1]=e=>a.to=e),maxlength:"3",label:t.$t("to"),class:"col-2","_:error":"to_data ? true : false","_:error-message":"to_data",clearable:"",rules:[e=>e&&e.length>0||t.$t("add_to")]},null,8,["modelValue","label","rules"]),o(f,{filled:"",type:"text",modelValue:a.decimal_digits,"onUpdate:modelValue":r[2]||(r[2]=e=>a.decimal_digits=e),maxlength:"1",label:t.$t("decimal_digits"),"lazy-rules":"",class:"col-4","_:error":"decimal_digits_data ? true : false","_:error-message":"decimal_digits_data",clearable:"",rules:[e=>e&&e.length>0||t.$t("add_decimal_digits")]},null,8,["modelValue","label","rules"]),o(f,{filled:"",type:"text",modelValue:a.rate,"onUpdate:modelValue":r[3]||(r[3]=e=>a.rate=e),label:t.$t("rate"),"lazy-rules":"",class:"col-4","_:error":"rate_data ? true : false","_:error-message":"rate_data",clearable:"",rules:[e=>e&&e.length>0||t.$t("add_rate")]},null,8,["modelValue","label","rules"]),o(f,{filled:"","lazy-rules":"",type:"text",modelValue:a.from_name,"onUpdate:modelValue":r[4]||(r[4]=e=>a.from_name=e),label:t.$t("from_name"),clearable:"","_:error":"from_name_data ? true : false","_:error-message":"from_name_data",class:"col-6",rules:[e=>e&&e.length>0||t.$t("add_from_name")]},null,8,["modelValue","label","rules"]),o(f,{filled:"","lazy-rules":"",type:"text",modelValue:a.to_name,"onUpdate:modelValue":r[5]||(r[5]=e=>a.to_name=e),label:t.$t("to_name"),clearable:"","_:error":"to_name_data ? true : false","_:error-message":"to_name_data",class:"col-6",rules:[e=>e&&e.length>0||t.$t("add_to_name")]},null,8,["modelValue","label","rules"]),o(f,{filled:"",type:"text",modelValue:a.amount,"onUpdate:modelValue":r[6]||(r[6]=e=>a.amount=e),label:t.$t("amount"),"lazy-rules":"",class:"col-6","_:error":"amount_data ? true : false","_:error-message":"amount_data",clearable:"",rules:[e=>e&&e.length>0||t.$t("add_amount")]},null,8,["modelValue","label","rules"]),o(f,{filled:"",type:"text",modelValue:a.result,"onUpdate:modelValue":r[7]||(r[7]=e=>a.result=e),label:t.$t("result"),"lazy-rules":"",class:"col-6","_:error":"result_data ? true : false","_:error-message":"result_data",clearable:"",rules:[e=>e&&e.length>0||t.$t("add_result")]},null,8,["modelValue","label","rules"])]),p("div",te,[a.Currency?(V(),E(n,{key:0,color:"primary",label:t.$t("Update Currency"),onClick:r[8]||(r[8]=v(e=>a.update(a.Currency),["prevent"]))},null,8,["label"])):(V(),E(n,{key:1,color:"primary",label:t.$t("Add Currency"),onClick:r[9]||(r[9]=v(e=>a.add(),["prevent"]))},null,8,["label"])),o(n,{round:"",icon:"fas fa-sync",color:"primary",class:"float-right",onClick:r[10]||(r[10]=v(e=>a.Edit({from:"",to:"",decimal_digits:0,rate:0,from_name:"",to_name:"",amount:0,result:0}),["prevent"]))})])])]),_:1})]),_:1},8,["modelValue"]),p("div",oe,[o(H,{style:P("height:"+a.height+"px"),class:"my-sticky-virtscroll-table",ref:"table",title:t.$t("currencies_list"),rows:a.rows,columns:a.columns,"row-key":"name","virtual-scroll":"","virtual-scroll-item-size":48,"rows-per-page-options":[0],filter:a.filter,"binary-state-sort":""},{body:d(e=>[o(j,{props:e},{default:d(()=>[o(s,{key:"id",props:e},{default:d(()=>[u(m(e.row.id),1)]),_:2},1032,["props"]),o(s,{key:"from",props:e},{default:d(()=>[u(m(e.row.from),1)]),_:2},1032,["props"]),o(s,{key:"to",props:e},{default:d(()=>[u(m(e.row.to),1)]),_:2},1032,["props"]),o(s,{key:"from_to",props:e},{default:d(()=>[u(m(e.row.from_to),1)]),_:2},1032,["props"]),o(s,{key:"from_name",props:e},{default:d(()=>[u(m(e.row.from_name),1)]),_:2},1032,["props"]),o(s,{key:"to_name",props:e},{default:d(()=>[u(m(e.row.to_name),1)]),_:2},1032,["props"]),o(s,{key:"decimal_digits",props:e},{default:d(()=>[u(m(e.row.decimal_digits),1)]),_:2},1032,["props"]),o(s,{key:"rate",props:e},{default:d(()=>[u(m(e.row.rate),1)]),_:2},1032,["props"]),o(s,{key:"amount",props:e},{default:d(()=>[u(m(e.row.amount),1)]),_:2},1032,["props"]),o(s,{key:"result",props:e},{default:d(()=>[u(m(e.row.result),1)]),_:2},1032,["props"]),a.currenciesData==="currencies"||a.currenciesData==="cyDuplicated"?(V(),q(B,{key:0},[o(s,{key:"edit",props:e},{default:d(()=>[o(n,{icon:"edit",rounded:"",class:"q-ma-md",onClick:v(g=>a.Edit(e.row),["prevent"])},null,8,["onClick"])]),_:2},1032,["props"]),o(s,{key:"delete",props:e},{default:d(()=>[o(n,{icon:"delete",rounded:"",onClick:v(g=>a.Delete(e.row),["prevent"])},null,8,["onClick"])]),_:2},1032,["props"])],64)):(V(),q(B,{key:1},[o(s,{key:"edit",props:e},{default:d(()=>[o(n,{icon:"restore",rounded:"",class:"q-ma-md",onClick:g=>a.restore(e.row)},null,8,["onClick"])]),_:2},1032,["props"]),o(s,{key:"delete",props:e},{default:d(()=>[o(n,{icon:"delete_forever",rounded:"",onClick:v(g=>a.delete_forever(e.row),["prevent"])},null,8,["onClick"])]),_:2},1032,["props"])],64))]),_:2},1032,["props"])]),"top-right":d(()=>[o(K,{modelValue:a.currenciesData,"onUpdate:modelValue":r[12]||(r[12]=e=>a.currenciesData=e),push:"","toggle-color":"primary",glossy:"",class:"q-ma-xs col-md-3",options:[{label:t.$t("currencies"),value:"currencies"},{label:t.$t("duplicated"),value:"cyDuplicated"},{label:t.$t("Trash"),value:"cyTrashed"}]},null,8,["modelValue","options"]),o(n,{icon:"add",class:"bg-primary q-ma-xs *col-md-1",label:t.$t("Add Currency"),onClick:r[13]||(r[13]=e=>a.editCurrency=!0)},null,8,["label"]),o(n,{icon:"fas fa-rotate",color:"primary",class:"q-ma-xs",label:a.amount*a.rate/1e3,loading:a.loader,onClick:a.fromAnalytics},null,8,["label","loading","onClick"]),o(f,{clearable:"",class:"q-ma-xs col-md-3",borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":r[14]||(r[14]=e=>a.filter=e),placeholder:t.$t("search")},{append:d(()=>[o(M,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["style","title","rows","columns","filter"])])],64)}var ke=Z($,[["render",re]]);export{ke as default};
