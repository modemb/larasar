import{c as y,r as _,o as U,ae as J,af as d,ag as x,f as s,al as i,K as L,an as n,ah as q,ai as k,F as w,ao as T,ak as S,ap as M,am as v,aj as A}from"./index.a0547624.js";import{Q as V}from"./QCardSection.f50f26ff.js";import{Q as E}from"./QCard.0993d832.js";import{x as O,y as z,k as F}from"./QCheckbox.b19fbb11.js";import{Q as K}from"./QTooltip.9359b4e9.js";import{C as j}from"./ClosePopup.80a36c56.js";import{c as G}from"./Functions.1e50194a.js";import{u as W,j as P,x as H,k as I,a as X}from"./axios.f7466c17.js";import Y from"./UserReports.2b986031.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{i18n as $}from"./i18n.184d27f4.js";function aa(t){const o=document.createElement("textarea");o.value=t,o.contentEditable="true",o.style.position="fixed";const r=()=>{};O(r),document.body.appendChild(o),o.focus(),o.select();const a=document.execCommand("copy");return o.remove(),z(r),a}function ea(t){return navigator.clipboard!==void 0?navigator.clipboard.writeText(t):new Promise((o,r)=>{const a=aa(t);a?o(!0):r(a)})}const ta={components:{Reports:Y},props:["shareData"],setup(t){var c,l,g,N,Q,R,B;const o=(l=(c=$)==null?void 0:c.global)==null?void 0:l.t,r=W(),{notifyAction:a}=r,C=y(()=>{var e;return!t.shareData||((e=t.shareData)==null?void 0:e.url)}),D=_([]),f=_(!1),h=_(!1),p=_([]),b=y(()=>{var e;return(e=r.configGetter)==null?void 0:e.ipDebug}),m=y(()=>r.authGetter);return U(()=>{const e=document.querySelector("#button");e&&e.addEventListener("click",async()=>{try{await("share"in navigator?navigator:G().Share).share(t.shareData)}catch{f.value=!P}})}),{users_reports:p,contacts:D,reports:h,auth:m,copyLink:C,share:f,xRate:H,cy:I,addressBook:"contacts"in navigator,currency:((g=t.shareData)==null?void 0:g.currency_code)||"USD",title:((N=t.shareData)==null?void 0:N.title)||"",path:(Q=t.shareData)!=null&&Q.id?"post/"+((R=t.shareData)==null?void 0:R.id):((B=m.value)==null?void 0:B.name)||"",locale:y(()=>{var e;return(e=r.configGetter)==null?void 0:e.locale}),price:y(()=>{var e,u;return((e=t.shareData)==null?void 0:e.price)||((u=t.shareData)==null?void 0:u.credit)}),usersReports(){var e;b.value&&X({url:"api/users/reports",method:"get",data:{users_reports:!0,id:(e=m.value)==null?void 0:e.id}}).then(({data:u})=>{p.value=u,h.value=!0}).catch(u=>a({error:"userReports",e:u}))},async shareT(){try{await("share"in navigator?navigator:G().Share).share(t.shareData)}catch{f.value=!P}},copy(){ea(C.value).then(()=>a({success:o("copy_successful")})).catch(e=>a({error:o("copy_unsuccessful"),e}))},async checkProperties(){},async getContacts(){var e;try{f.value=!!((e=D.value)!=null&&e.length)}catch{}}}}},oa={class:"text-h6"},ra={class:"text-h6"},sa=q("br",null,null,-1);function ca(t,o,r,a,C,D){var h,p,b,m;const f=J("Reports");return d(),x(w,null,[s(F,{modelValue:a.share,"onUpdate:modelValue":o[0]||(o[0]=c=>a.share=c)},{default:i(()=>[s(E,{class:"my-card text-black"},{default:i(()=>{var c;return[s(V,{class:"bg-primary text-white"},{default:i(()=>{var l;return[L(s(n,{dense:"",round:"",color:"primary",class:"float-right",icon:"close"},null,512),[[j]]),q("div",oa,k(((l=r.shareData)==null?void 0:l.banner)||""),1)]}),_:1}),(c=a.contacts)!=null&&c.length?S("",!0):(d(),x(w,{key:0},[s(n,{color:"primary",class:"q-ma-sm q-dark",icon:"fab fa-facebook","data-href":"https://suguffie.com/post/1",target:"_blank","data-layout":"button_count","data-size":"small",type:"a",label:t.$t("share_on_facebook"),href:`https://www.facebook.com/sharer/sharer.php?u=https://suguffie.com/${a.path}`},null,8,["label","href"]),s(n,{color:"primary",class:"q-ma-sm q-dark",icon:"fas fa-link",label:a.copyLink,onClick:T(a.copy,["stop","prevent"])},null,8,["label","onClick"])],64)),(d(!0),x(w,null,M(a.contacts,(l,g)=>(d(),v(V,{key:g},{default:i(()=>[s(n,{type:"a",class:"q-ma-md",icon:"fas fa-envelope",target:"_blank","_:href":"`mailto:${JSON.stringify(contact.email).replaceAll('[','').replaceAll(']','')}?&subject=${title}&body=Checkout ${copyLink}`"}),s(n,{type:"a",class:"q-ma-md",icon:"fas fa-sms","_:href":"`sms://${JSON.stringify(contact.tel).replaceAll('[','').replaceAll(']','')}?body=${copyLink}`"})]),_:2},1024))),128))]}),_:1})]),_:1},8,["modelValue"]),s(F,{modelValue:a.reports,"onUpdate:modelValue":o[1]||(o[1]=c=>a.reports=c)},{default:i(()=>[s(E,{class:"my-card text-black"},{default:i(()=>[s(V,{class:"bg-primary text-white"},{default:i(()=>[L(s(n,{dense:"",round:"",class:"float-right",icon:"close"},null,512),[[j]]),q("div",ra,k(t.$t("reports")),1)]),_:1}),s(f,{users_reports:a.users_reports},null,8,["users_reports"])]),_:1})]),_:1},8,["modelValue"]),(a.price>0,d(),v(n,{key:0,class:"q-ma-sm",onClick:T(a.usersReports,["prevent"]),disabled:(h=r.shareData)==null?void 0:h.price,dense:"",color:(p=r.shareData)!=null&&p.price?"":"positive",label:(b=r.shareData)!=null&&b.price?Number(a.price).toLocaleString(a.locale,{style:"currency",currency:a.currency}):a.cy(a.xRate(a.price))},null,8,["onClick","disabled","color","label"])),s(n,{dense:"",flat:"",round:"",icon:"fas fa-share-alt","icon-right":"fas fa-sack-dollar",onClick:a.shareT},null,8,["onClick"]),a.addressBook?(d(),v(n,{key:1,dense:"",flat:"",round:"",icon:"fas fa-address-book",onClick:a.getContacts},null,8,["onClick"])):S("",!0),(m=r.shareData)!=null&&m.tooltip?(d(),v(n,{key:2,dense:"",flat:"",round:"",icon:"fas fa-question"},{default:i(()=>[s(K,{anchor:"top middle",self:"bottom middle",offset:[10,10],class:"text-h6"},{default:i(()=>{var c,l;return[A(k(t.$t("To gain users and earn money, you can share your affiliate link. When new users sign up using this link, you'll earn a percentage of their spending.")),1),sa,A(" "+k(((c=r.shareData)==null?void 0:c.tooltip)||"")+" "+k("suguffie.com/"+(((l=a.auth)==null?void 0:l.name)||"")),1)]}),_:1})]),_:1})):S("",!0)],64)}var ba=Z(ta,[["render",ca]]);export{ba as S};
