import{ab as ze,y as ye,ac as Pe,c as g,h as _,aM as Ue,g as ie,r as C,aT as Fe,V as ke,a2 as Ae,aB as Be,Z as De,bd as Qe,w as le,C as Re,b as Le,aD as Te,a_ as Ne,D as ge,Q as ne,an as L,ad as Ee,aw as je,o as Ie,af as B,am as E,al as M,f as U,ah as oe,ai as Oe,K as Me,ak as R,ag as $,ao as Z,aq as ee,F as Ve}from"./index.d6c95a7b.js";import{a as He,Q as We}from"./QBar.fe849e49.js";import{b as Ye,w as he,Q as _e,C as Ge}from"./ClosePopup.0c5fb872.js";import{u as Xe,a as Ke}from"./use-dark.b9235899.js";import{c as Ze,b as Je}from"./QTable.9d3ff620.js";import{Q as $e}from"./QToggle.34bdd8ca.js";import{a as ea,b as aa}from"./QLayout.8583c076.js";import{Q as ta}from"./QImg.0ba9e0aa.js";import{t as la}from"./QCheckbox.448c8bf2.js";import{Q as ra}from"./QCard.fc8dc166.js";import{Q as oa}from"./QPage.344c31f3.js";import{Q as na}from"./QPageContainer.bf5e1af8.js";import{u as sa}from"./use-quasar.cb55fe1d.js";import{u as ia,d as ua,j as da,q as ca,a as ae,r as fa,e as va}from"./axios.3202fc3e.js";import{c as ma,t as pa}from"./Functions.1e50194a.js";import{_ as ga}from"./plugin-vue_export-helper.21dcd24c.js";import"./QSeparator.8817dad6.js";import"./i18n.31f4444f.js";const ha={...ze,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:t=>t>=0&&t<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},se=50,we=2*se,qe=we*Math.PI,_a=Math.round(qe*1e3)/1e3;var ba=ye({name:"QCircularProgress",props:{...ha,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(t,{slots:o}){const{proxy:{$q:n}}=ie(),e=Pe(t),d=g(()=>{const F=(n.lang.rtl===!0?-1:1)*t.angle;return{transform:t.reverse!==(n.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-F}deg)`:`rotate3d(0, 0, 1, ${F-90}deg)`}}),c=g(()=>t.instantFeedback!==!0&&t.indeterminate!==!0?{transition:`stroke-dashoffset ${t.animationSpeed}ms ease 0s, stroke ${t.animationSpeed}ms ease`}:""),u=g(()=>we/(1-t.thickness/2)),w=g(()=>`${u.value/2} ${u.value/2} ${u.value} ${u.value}`),k=g(()=>Ye(t.value,t.min,t.max)),S=g(()=>t.max-t.min),h=g(()=>t.thickness/2*u.value),q=g(()=>{const F=(t.max-k.value)/S.value,a=t.rounded===!0&&k.value<t.max&&F<.25?h.value/2*(1-F/.25):0;return qe*F+a});function D({thickness:F,offset:a,color:f,cls:z,rounded:v}){return _("circle",{class:"q-circular-progress__"+z+(f!==void 0?` text-${f}`:""),style:c.value,fill:"transparent",stroke:"currentColor","stroke-width":F,"stroke-dasharray":_a,"stroke-dashoffset":a,"stroke-linecap":v,cx:u.value,cy:u.value,r:se})}return()=>{const F=[];t.centerColor!==void 0&&t.centerColor!=="transparent"&&F.push(_("circle",{class:`q-circular-progress__center text-${t.centerColor}`,fill:"currentColor",r:se-h.value/2,cx:u.value,cy:u.value})),t.trackColor!==void 0&&t.trackColor!=="transparent"&&F.push(D({cls:"track",thickness:h.value,offset:0,color:t.trackColor})),F.push(D({cls:"circle",thickness:h.value,offset:q.value,color:t.color,rounded:t.rounded===!0?"round":void 0}));const a=[_("svg",{class:"q-circular-progress__svg",style:d.value,viewBox:w.value,"aria-hidden":"true"},F)];return t.showValue===!0&&a.push(_("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:t.fontSize}},o.default!==void 0?o.default():[_("div",k.value)])),_("div",{class:`q-circular-progress q-circular-progress--${t.indeterminate===!0?"in":""}determinate`,style:e.value,role:"progressbar","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.indeterminate===!0?void 0:k.value},Ue(o.internal,a))}}});function X(t,o,n,e){const d=[];return t.forEach(c=>{e(c)===!0?d.push(c):o.push({failedPropValidation:n,file:c})}),d}function te(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),ke(t)}const ya={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Fa=["rejected"];function ka({editable:t,dnd:o,getFileInput:n,addFilesToQueue:e}){const{props:d,emit:c,proxy:u}=ie(),w=C(null),k=g(()=>d.accept!==void 0?d.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),S=g(()=>parseInt(d.maxFiles,10)),h=g(()=>parseInt(d.maxTotalSize,10));function q(r){if(t.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&Fe(r);else{const P=n();P&&P!==r.target&&P.click(r)}}function D(r){t.value&&r&&e(null,r)}function F(r,P,T,s){let i=Array.from(P||r.target.files);const m=[],N=()=>{m.length!==0&&c("rejected",m)};if(d.accept!==void 0&&k.value.indexOf("*/")===-1&&(i=X(i,m,"accept",b=>k.value.some(x=>b.type.toUpperCase().startsWith(x)||b.name.toUpperCase().endsWith(x))),i.length===0))return N();if(d.maxFileSize!==void 0){const b=parseInt(d.maxFileSize,10);if(i=X(i,m,"max-file-size",x=>x.size<=b),i.length===0)return N()}if(d.multiple!==!0&&i.length!==0&&(i=[i[0]]),i.forEach(b=>{b.__key=b.webkitRelativePath+b.lastModified+b.name+b.size}),s===!0){const b=T.map(x=>x.__key);i=X(i,m,"duplicate",x=>b.includes(x.__key)===!1)}if(i.length===0)return N();if(d.maxTotalSize!==void 0){let b=s===!0?T.reduce((x,I)=>x+I.size,0):0;if(i=X(i,m,"max-total-size",x=>(b+=x.size,b<=h.value)),i.length===0)return N()}if(typeof d.filter=="function"){const b=d.filter(i);i=X(i,m,"filter",x=>b.includes(x))}if(d.maxFiles!==void 0){let b=s===!0?T.length:0;if(i=X(i,m,"max-files",()=>(b++,b<=S.value)),i.length===0)return N()}if(N(),i.length!==0)return i}function a(r){te(r),o.value!==!0&&(o.value=!0)}function f(r){ke(r),(r.relatedTarget!==null||Ae.is.safari!==!0?r.relatedTarget!==w.value:document.elementsFromPoint(r.clientX,r.clientY).includes(w.value)===!1)===!0&&(o.value=!1)}function z(r){te(r);const P=r.dataTransfer.files;P.length!==0&&e(null,P),o.value=!1}function v(r){if(o.value===!0)return _("div",{ref:w,class:`q-${r}__dnd absolute-full`,onDragenter:te,onDragover:te,onDragleave:f,onDrop:z})}return Object.assign(u,{pickFiles:q,addFiles:D}),{pickFiles:q,addFiles:D,onDragover:a,onDragleave:f,processFiles:F,getDndNode:v,maxFilesNumber:S,maxTotalSizeNumber:h}}function be(t){return(t*100).toFixed(2)+"%"}const wa={...Xe,...ya,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},xe=[...Fa,"start","finish","added","removed"];function qa(t,o){const n=ie(),{props:e,slots:d,emit:c,proxy:u}=n,{$q:w}=u,k=Ke(e,w);function S(l,y,A){if(l.__status=y,y==="idle"){l.__uploaded=0,l.__progress=0,l.__sizeLabel=he(l.size),l.__progressLabel="0.00%";return}if(y==="failed"){u.$forceUpdate();return}l.__uploaded=y==="uploaded"?l.size:A,l.__progress=y==="uploaded"?1:Math.min(.9999,l.__uploaded/l.size),l.__progressLabel=be(l.__progress),u.$forceUpdate()}const h=g(()=>e.disable!==!0&&e.readonly!==!0),q=C(!1),D=C(null),F=C(null),a={files:C([]),queuedFiles:C([]),uploadedFiles:C([]),uploadedSize:C(0),updateFileStatus:S,isAlive:()=>Be(n)===!1},{pickFiles:f,addFiles:z,onDragover:v,onDragleave:r,processFiles:P,getDndNode:T,maxFilesNumber:s,maxTotalSizeNumber:i}=ka({editable:h,dnd:q,getFileInput:ce,addFilesToQueue:fe});Object.assign(a,t({props:e,slots:d,emit:c,helpers:a,exposeApi:l=>{Object.assign(a,l)}})),a.isBusy===void 0&&(a.isBusy=C(!1));const m=C(0),N=g(()=>m.value===0?0:a.uploadedSize.value/m.value),b=g(()=>be(N.value)),x=g(()=>he(m.value)),I=g(()=>h.value===!0&&a.isUploading.value!==!0&&(e.multiple===!0||a.queuedFiles.value.length===0)&&(e.maxFiles===void 0||a.files.value.length<s.value)&&(e.maxTotalSize===void 0||m.value<i.value)),p=g(()=>h.value===!0&&a.isBusy.value!==!0&&a.isUploading.value!==!0&&a.queuedFiles.value.length!==0);De(Qe,me);const H=g(()=>"q-uploader column no-wrap"+(k.value===!0?" q-uploader--dark q-dark":"")+(e.bordered===!0?" q-uploader--bordered":"")+(e.square===!0?" q-uploader--square no-border-radius":"")+(e.flat===!0?" q-uploader--flat no-shadow":"")+(e.disable===!0?" disabled q-uploader--disable":"")+(q.value===!0?" q-uploader--dnd":"")),W=g(()=>"q-uploader__header"+(e.color!==void 0?` bg-${e.color}`:"")+(e.textColor!==void 0?` text-${e.textColor}`:""));le(a.isUploading,(l,y)=>{y===!1&&l===!0?c("start"):y===!0&&l===!1&&c("finish")});function Y(){e.disable===!1&&(a.abort(),a.uploadedSize.value=0,m.value=0,de(),a.files.value=[],a.queuedFiles.value=[],a.uploadedFiles.value=[])}function j(){e.disable===!1&&ue(["uploaded"],()=>{a.uploadedFiles.value=[]})}function J(){ue(["idle","failed"],({size:l})=>{m.value-=l,a.queuedFiles.value=[]})}function ue(l,y){if(e.disable===!0)return;const A={files:[],size:0},O=a.files.value.filter(Q=>l.indexOf(Q.__status)===-1?!0:(A.size+=Q.size,A.files.push(Q),Q.__img!==void 0&&window.URL.revokeObjectURL(Q.__img.src),!1));A.files.length!==0&&(a.files.value=O,y(A),c("removed",A.files))}function re(l){e.disable||(l.__status==="uploaded"?a.uploadedFiles.value=a.uploadedFiles.value.filter(y=>y.__key!==l.__key):l.__status==="uploading"?l.__abort():m.value-=l.size,a.files.value=a.files.value.filter(y=>y.__key!==l.__key?!0:(y.__img!==void 0&&window.URL.revokeObjectURL(y.__img.src),!1)),a.queuedFiles.value=a.queuedFiles.value.filter(y=>y.__key!==l.__key),c("removed",[l]))}function de(){a.files.value.forEach(l=>{l.__img!==void 0&&window.URL.revokeObjectURL(l.__img.src)})}function ce(){return F.value||D.value.getElementsByClassName("q-uploader__input")[0]}function fe(l,y){const A=P(l,y,a.files.value,!0),O=ce();O!=null&&(O.value=""),A!==void 0&&(A.forEach(Q=>{if(a.updateFileStatus(Q,"idle"),m.value+=Q.size,e.noThumbnails!==!0&&Q.type.toUpperCase().startsWith("IMAGE")){const pe=new Image;pe.src=window.URL.createObjectURL(Q),Q.__img=pe}}),a.files.value=a.files.value.concat(A),a.queuedFiles.value=a.queuedFiles.value.concat(A),c("added",A),e.autoUpload===!0&&a.upload())}function ve(){p.value===!0&&a.upload()}function K(l,y,A){if(l===!0){const O={type:"a",key:y,icon:w.iconSet.uploader[y],flat:!0,dense:!0};let Q;return y==="add"?(O.onClick=f,Q=me):O.onClick=A,_(L,O,Q)}}function me(){return _("input",{ref:F,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:e.accept,multiple:e.multiple===!0?"multiple":void 0,capture:e.capture,onMousedown:Fe,onClick:f,onChange:fe})}function Ce(){return d.header!==void 0?d.header(G):[_("div",{class:"q-uploader__header-content column"},[_("div",{class:"flex flex-center no-wrap q-gutter-xs"},[K(a.queuedFiles.value.length!==0,"removeQueue",J),K(a.uploadedFiles.value.length!==0,"removeUploaded",j),a.isUploading.value===!0?_(ge,{class:"q-uploader__spinner"}):null,_("div",{class:"col column justify-center"},[e.label!==void 0?_("div",{class:"q-uploader__title"},[e.label]):null,_("div",{class:"q-uploader__subtitle"},[x.value+" / "+b.value])]),K(I.value,"add"),K(e.hideUploadBtn===!1&&p.value===!0,"upload",a.upload),K(a.isUploading.value,"clear",a.abort)])])]}function Se(){return d.list!==void 0?d.list(G):a.files.value.map(l=>_("div",{key:l.__key,class:"q-uploader__file relative-position"+(e.noThumbnails!==!0&&l.__img!==void 0?" q-uploader__file--img":"")+(l.__status==="failed"?" q-uploader__file--failed":l.__status==="uploaded"?" q-uploader__file--uploaded":""),style:e.noThumbnails!==!0&&l.__img!==void 0?{backgroundImage:'url("'+l.__img.src+'")'}:null},[_("div",{class:"q-uploader__file-header row flex-center no-wrap"},[l.__status==="failed"?_(ne,{class:"q-uploader__file-status",name:w.iconSet.type.negative,color:"negative"}):null,_("div",{class:"q-uploader__file-header-content col"},[_("div",{class:"q-uploader__title"},[l.name]),_("div",{class:"q-uploader__subtitle row items-center no-wrap"},[l.__sizeLabel+" / "+l.__progressLabel])]),l.__status==="uploading"?_(ba,{value:l.__progress,min:0,max:1,indeterminate:l.__progress===0}):_(L,{round:!0,dense:!0,flat:!0,icon:w.iconSet.uploader[l.__status==="uploaded"?"done":"clear"],onClick:()=>{re(l)}})])]))}Re(()=>{a.isUploading.value===!0&&a.abort(),a.files.value.length!==0&&de()});const G={};for(const l in a)Le(a[l])===!0?Te(G,l,()=>a[l].value):G[l]=a[l];return Object.assign(G,{upload:ve,reset:Y,removeUploadedFiles:j,removeQueuedFiles:J,removeFile:re,pickFiles:f,addFiles:z}),Ne(G,{canAddFiles:()=>I.value,canUpload:()=>p.value,uploadSizeLabel:()=>x.value,uploadProgressLabel:()=>b.value}),o({...a,upload:ve,reset:Y,removeUploadedFiles:j,removeQueuedFiles:J,removeFile:re,pickFiles:f,addFiles:z,canAddFiles:I,canUpload:p,uploadSizeLabel:x,uploadProgressLabel:b}),()=>{const l=[_("div",{class:W.value},Ce()),_("div",{class:"q-uploader__list scroll"},Se()),T("uploader")];a.isBusy.value===!0&&l.push(_("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[_(ge)]));const y={ref:D,class:H.value};return I.value===!0&&Object.assign(y,{onDragover:v,onDragleave:r}),_("div",y,l)}}const xa=()=>!0;function Ca(t){const o={};return t.forEach(n=>{o[n]=xa}),o}const Sa=Ca(xe);var za=({name:t,props:o,emits:n,injectPlugin:e})=>ye({name:t,props:{...wa,...o},emits:Ee(n)===!0?{...Sa,...n}:[...xe,...n],setup(d,{expose:c}){return qa(e,c)}});function V(t){return typeof t=="function"?t:()=>t}const Pa="QUploader",Ua={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>t=>t.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Aa=["factoryFailed","uploaded","failed","uploading"];function Ba({props:t,emit:o,helpers:n}){const e=C([]),d=C([]),c=C(0),u=g(()=>({url:V(t.url),method:V(t.method),headers:V(t.headers),formFields:V(t.formFields),fieldName:V(t.fieldName),withCredentials:V(t.withCredentials),sendRaw:V(t.sendRaw),batch:V(t.batch)})),w=g(()=>c.value>0),k=g(()=>d.value.length!==0);let S;function h(){e.value.forEach(a=>{a.abort()}),d.value.length!==0&&(S=!0)}function q(){const a=n.queuedFiles.value.slice(0);n.queuedFiles.value=[],u.value.batch(a)?D(a):a.forEach(f=>{D([f])})}function D(a){if(c.value++,typeof t.factory!="function"){F(a,{});return}const f=t.factory(a);if(!f)o("factoryFailed",new Error("QUploader: factory() does not return properly"),a),c.value--;else if(typeof f.catch=="function"&&typeof f.then=="function"){d.value.push(f);const z=v=>{n.isAlive()===!0&&(d.value=d.value.filter(r=>r!==f),d.value.length===0&&(S=!1),n.queuedFiles.value=n.queuedFiles.value.concat(a),a.forEach(r=>{n.updateFileStatus(r,"failed")}),o("factoryFailed",v,a),c.value--)};f.then(v=>{S===!0?z(new Error("Aborted")):n.isAlive()===!0&&(d.value=d.value.filter(r=>r!==f),F(a,v))}).catch(z)}else F(a,f||{})}function F(a,f){const z=new FormData,v=new XMLHttpRequest,r=(p,H)=>f[p]!==void 0?V(f[p])(H):u.value[p](H),P=r("url",a);if(!P){console.error("q-uploader: invalid or no URL specified"),c.value--;return}const T=r("formFields",a);T!==void 0&&T.forEach(p=>{z.append(p.name,p.value)});let s=0,i=0,m=0,N=0,b;v.upload.addEventListener("progress",p=>{if(b===!0)return;const H=Math.min(N,p.loaded);n.uploadedSize.value+=H-m,m=H;let W=m-i;for(let Y=s;W>0&&Y<a.length;Y++){const j=a[Y];if(W>j.size)W-=j.size,s++,i+=j.size,n.updateFileStatus(j,"uploading",j.size);else{n.updateFileStatus(j,"uploading",W);return}}},!1),v.onreadystatechange=()=>{v.readyState<4||(v.status&&v.status<400?(n.uploadedFiles.value=n.uploadedFiles.value.concat(a),a.forEach(p=>{n.updateFileStatus(p,"uploaded")}),o("uploaded",{files:a,xhr:v})):(b=!0,n.uploadedSize.value-=m,n.queuedFiles.value=n.queuedFiles.value.concat(a),a.forEach(p=>{n.updateFileStatus(p,"failed")}),o("failed",{files:a,xhr:v})),c.value--,e.value=e.value.filter(p=>p!==v))},v.open(r("method",a),P),r("withCredentials",a)===!0&&(v.withCredentials=!0);const x=r("headers",a);x!==void 0&&x.forEach(p=>{v.setRequestHeader(p.name,p.value)});const I=r("sendRaw",a);a.forEach(p=>{n.updateFileStatus(p,"uploading",0),I!==!0&&z.append(r("fieldName",p),p,p.name),p.xhr=v,p.__abort=()=>{v.abort()},N+=p.size}),o("uploading",{files:a,xhr:v}),e.value.push(v),I===!0?v.send(new Blob(a)):v.send(z)}return{isUploading:w,isBusy:k,abort:h,upload:q}}var Da={name:Pa,props:Ua,emits:Aa,injectPlugin:Ba},Qa=za(Da);const Ra={props:["height","avatar","post"],setup(t,{emit:o}){var P,T;const n=sa(),e=ia(),{crudAction:d,notifyAction:c}=e,u=je(),w=C([]),k=C("my_pics"),S=0,h=g(()=>e.authGetter),q=g(()=>{var s;return(s=e.filesGetter)==null?void 0:s.array}),D=g(()=>e[k.value]||[]),F=C({page:1,rowsPerPage:r()});le(()=>n.screen.name,()=>F.value.rowsPerPage=r()),le(q,s=>z(w.value=s)),le(k,()=>f({}));const a=s=>fa(s);function f(s){var i;return t.avatar&&(k.value="avatars"),w.value=[],d({...s,url:`api/users/${(i=h.value)==null?void 0:i.id}`,method:"get",mutate:k.value}).then(()=>o("reload",t.post?"postFilePopUp":u)).catch(m=>c({error:"FilesAction",e:m}))}Ie(()=>f({}));function z(s){var i;ae({url:`api/users/${(i=h.value)==null?void 0:i.id}`,method:"put",data:{avatar:t.avatar,post:t.post,pics:s,update:!0}}).then(({data:m})=>{f({refresh:["reloadApp"]}).then(()=>!t.avatar||va()),c(m)}).catch(m=>c({error:"StoreFiles",e:m}))}function v(s){var i;if(confirm("Are You Sure You Want "+(s!=null&&s.forever?"To Delete Forever Pics":"To Delete Pics"))===!0)return d({url:`api/users/${(i=h.value)==null?void 0:i.id}`,method:"delete",auth:h==null?void 0:h.value,forever:s==null?void 0:s.forever,pics:s}).then(()=>f({refresh:["reloadApp"]})).catch(m=>c({error:"deleteSelectedFiles",e:m}))}function r(){return S}return{baseURL:ua,filter:C(""),auth:h,ipDebug:g(()=>{var s;return(s=e.configGetter)==null?void 0:s.ipDebug}),upload:C(!1),bool:C(!1),selectedFiles:w,showFiles:k,ios:((T=(P=ma())==null?void 0:P.Capacitor)==null?void 0:T.getPlatform())==="ios",modembIos:navigator.userAgent.match(/(modembIos)/),mobileApp:da,storeFiles:z,readFiles:a,files:C(null),logUserAction:ca,takePhoto:async()=>z([await pa()]),restore(s){ae({url:"api/users",method:"post",data:{restorePics:s}}).then(()=>f({refresh:["reloadApp"]})).catch(i=>c({error:"restorePics",e:i}))},restoreAll(){confirm("Restore All Files")&&ae({url:"api/users",method:"post",data:{filesRestore:!0}}).then(()=>f({refresh:["reloadApp"]})).catch(s=>c({error:"restoreAll",e:s}))},deletePic(s){confirm("Are You Sure You Want To Delete Pics")===!0&&ae.delete(`api/users/${s}?deletePic=1`).then(()=>f({refresh:["reloadApp"]})).catch(i=>c({error:"deletePic",e:i}))},Delete:v,delete_forever(s){s.forever=!0,v(s)},columns:[{name:"pic",align:"center",label:"picture",field:"pic",sortable:!0},{name:"post_title",align:"center",label:"post_title",field:"name",sortable:!0},{name:"address",align:"center",label:"address",field:"address",sortable:!0},{name:"city",align:"center",label:"city",field:"city",sortable:!0},{name:"end_date",align:"center",label:"expiry",field:"end_date",sortable:!0},{name:"edit",align:"center",label:"edit",field:"edit",sortable:!1},{name:"delete",align:"center",label:"delete",field:"delete",sortable:!1}],rows:D,pagination:F,cardContainerClass:g(()=>n.screen.gt.xs?"grid-masonry grid-masonry--"+(n.screen.gt.sm?"3":"2"):""),cardContainerStyle:g(()=>{var s;return{height:((s=D.value)==null?void 0:s.length)*200+"px"}}),rowsPerPageOptions:g(()=>n.screen.gt.xs?n.screen.gt.sm?[3,6,9]:[3,6]:[3])}}},La={key:1,class:"q-pa-sm row items-center"},Ta={key:0,class:"col-xl-4"},Na={class:"col-xl-8"},Ea={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},ja=["innerHTML"];function Ia(t,o,n,e,d,c){return B(),E(ea,{view:"lHh lpr lFf",container:"",style:{height:"800px"},class:"shadow-2 rounded-borders"},{default:M(()=>[U(aa,{elevated:""},{default:M(()=>{var u,w,k,S,h;return[n.post||n.avatar?(B(),E(He,{key:0},{default:M(()=>[U(ne,{name:"fas fa-photo-video"}),oe("div",null,Oe(t.$t("My Library")),1),U(We),Me(U(L,{dense:"",flat:"",icon:"close"},null,512),[[Ge]])]),_:1})):R("",!0),!n.avatar||e.ipDebug?(B(),$("div",La,[n.post||e.ipDebug?(B(),$("div",Ta,[e.mobileApp?(B(),E(L,{key:0,color:"primary",icon:"fas fa-camera",onClick:e.takePhoto},null,8,["onClick"])):R("",!0),e.upload?(B(),E(Qa,{key:1,factory:e.readFiles,label:t.$t("Batch upload"),multiple:"","max-files":"10","auto-upload":"",batch:""},null,8,["factory","label"])):R("",!0),U(_e,{filled:"",multiple:"",type:"file",hint:"Native file (multiple)",dark:"","onUpdate:modelValue":o[0]||(o[0]=q=>e.readFiles(q))})])):R("",!0),oe("div",Na,[e.ipDebug?(B(),E(L,{key:0,class:"q-ma-xs col-md-2",icon:"fas fa-cloud-upload-alt",onClick:o[1]||(o[1]=Z(q=>e.upload=!e.upload,["prevent"]))})):R("",!0),U(Ze,{modelValue:e.showFiles,"onUpdate:modelValue":o[2]||(o[2]=q=>e.showFiles=q),push:"",glossy:"",class:"q-ma-xs *col-xs-2 *col-md-2","toggle-color":"orange",options:[{label:t.$t("My Pics"),value:"my_pics"},{label:t.$t("Trash"),value:e.bool?"all_trashed_pics":"trashed_pics"}].concat(e.ipDebug||((u=e.auth)==null?void 0:u.role)==="Admin"?[{label:t.$t("Users Pics"),value:"users_pics"},{label:t.$t("Avatars"),value:"avatars"},{label:t.$t("All Pics"),value:"all_pics"}]:[])},null,8,["modelValue","options"]),e.ipDebug&&e.showFiles==="trashed_pics"||e.showFiles==="all_trashed_pics"?(B(),E($e,{key:1,icon:"fas fa-user"+(e.bool?"s":""),val:[!0],size:"xl",modelValue:e.bool,"onUpdate:modelValue":o[3]||(o[3]=q=>e.bool=q)},null,8,["icon","modelValue"])):R("",!0),n.post?(B(),E(L,{key:2,icon:"fas fa-file-import",class:ee(((w=e.selectedFiles)!=null&&w.length?"bg-orange":"")+" q-ma-xs col-md-2"),onClick:o[4]||(o[4]=q=>e.storeFiles(e.selectedFiles))},null,8,["class"])):R("",!0),e.ipDebug?(B(),E(L,{key:3,icon:"edit",class:"q-ma-xs col-md-2",label:"restore all",onClick:e.restoreAll},null,8,["onClick"])):R("",!0),e.showFiles!=="trashed_pics"&&e.showFiles!=="all_trashed_pics"?(B(),E(L,{key:4,icon:"delete",class:ee(((k=e.selectedFiles)!=null&&k.length?"bg-orange":"")+" q-ma-xs col-md-2"),onClick:o[5]||(o[5]=Z(q=>e.Delete(e.selectedFiles),["prevent"]))},null,8,["class"])):(B(),$(Ve,{key:5},[U(L,{icon:"restore",class:ee(((S=e.selectedFiles)!=null&&S.length?"bg-orange":"")+" q-ma-xs col-md-2"),onClick:o[6]||(o[6]=q=>e.restore(e.selectedFiles))},null,8,["class"]),U(L,{icon:"delete_forever",class:ee(((h=e.selectedFiles)!=null&&h.length?"bg-orange":"")+" q-ma-xs col-md-2"),onClick:o[7]||(o[7]=Z(q=>e.delete_forever(e.selectedFiles),["prevent"]))},null,8,["class"])],64))])])):R("",!0)]}),_:1}),U(na,null,{default:M(()=>[U(oa,{class:"q-pa-sm"},{default:M(()=>[U(Je,{"_:style":"'height:' + height + 'px;'",grid:"","card-container-style":e.cardContainerStyle,"card-container-class":e.cardContainerClass,title:t.$t("gallery"),rows:e.rows,columns:e.columns,"row-key":"name",filter:e.filter,"hide-header":"",pagination:e.pagination,"onUpdate:pagination":o[10]||(o[10]=u=>e.pagination=u),"rows-per-page-options":e.rowsPerPageOptions,"virtual-scroll":"","virtual-scroll-item-size":48},{"top-right":M(()=>[U(_e,{clearable:"",borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":o[8]||(o[8]=u=>e.filter=u),placeholder:"Search"},{append:M(()=>[U(ne,{name:"search"})]),_:1},8,["modelValue"])]),item:M(u=>[oe("div",Ea,[U(ra,{class:"my-card"},{default:M(()=>{var w,k,S;return[U(ta,{src:(k=(w=u.row)==null?void 0:w.avatar)!=null&&k.includes("https")?u.row.avatar:e.baseURL+"/"+(u.row.pic||u.row.avatar)},null,8,["src"]),u.row.name?(B(),$("div",{key:0,innerHTML:u.row.name},null,8,ja)):R("",!0),U(la,{modelValue:e.selectedFiles,"onUpdate:modelValue":o[9]||(o[9]=h=>e.selectedFiles=h),val:u.row.pic,label:u.row.updated_at||u.row.id},null,8,["modelValue","val","label"]),e.ipDebug?(B(),E(L,{key:1,size:"12px",flat:"",dense:"",icon:"fas fa-sign-in-alt",label:t.$t("Log User"),onClick:Z(h=>e.logUserAction(u.row.user_id||u.row.id),["prevent"])},null,8,["label","onClick"])):R("",!0),e.showFiles!=="trashed_pics"&&e.showFiles!=="all_trashed_pics"&&((S=e.selectedFiles)==null?void 0:S.length)?(B(),E(L,{key:2,label:t.$t("delete"),size:"12px",icon:"fas fa-trash",onClick:Z(h=>e.deletePic(u.row.id),["prevent"]),flat:"",dense:""},null,8,["label","onClick"])):R("",!0)]}),_:2},1024)])]),_:1},8,["card-container-style","card-container-class","title","rows","columns","filter","pagination","rows-per-page-options"])]),_:1})]),_:1})]),_:1})}var nt=ga(Ra,[["render",Ia]]);export{nt as default};
